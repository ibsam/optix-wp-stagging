function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,a){var t;if(r)return"string"==typeof r?_arrayLikeToArray(r,a):"Map"===(t="Object"===(t={}.toString.call(r).slice(8,-1))&&r.constructor?r.constructor.name:t)||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function initDeepLinkHandler(){document.addEventListener("alpine:init",function(){Alpine.store("deepLink",{init:function(){var _this=this;this.checkDeepLink(),window.addEventListener("hashchange",function(){return _this.checkDeepLink()})},checkDeepLink:function(){var _this2=this,hash=window.location.hash.replace("#","");hash&&setTimeout(function(){_this2.processDeepLink(hash)},100)},processDeepLink:function(targetId){var target=document.getElementById(targetId),altTarget=document.querySelector('[data-deeplink-id="'.concat(targetId,'"]')),target=target||altTarget;(target||(altTarget=targetId.replace(/_/g,"-"),target=document.getElementById(altTarget)))&&this.processElement(target)},processElement:function(element){var _this3=this;this.openParentPanels(element),setTimeout(function(){_this3.highlightElement(element)},350)},openParentPanels:function(element){for(var parent=element.parentElement;parent&&parent!==document.body;){(parent.hasAttribute("x-show")||parent.hasAttribute("x-collapse"))&&(alpineParent=this.findAlpineParent(parent))&&this.openAlpinePanel(alpineParent,parent);var component,alpineParent=parent.closest(".affwp-payment-card");alpineParent&&alpineParent.getAttribute("data-method")&&(component=Alpine.$data(alpineParent))&&void 0!==component.panelOpen&&(component.panelOpen=!0),parent=parent.parentElement}},findAlpineParent:function(panel){for(var current=panel;current&&current!==document.body;){if(current.hasAttribute("x-data"))return current;current=current.parentElement}return null},openAlpinePanel:function(component,panel){var panel=panel.getAttribute("x-show");panel&&(panel=panel.match(/^(\w+)/))&&(panel=panel[1],component=Alpine.$data(component))&&void 0!==component[panel]&&(component[panel]=!0)},highlightElement:function(element){element.scrollIntoView({behavior:"smooth",block:"center"});var highlightClasses=["ring-2","ring-affwp-brand-500","ring-offset-2","transition-all"],customClasses=element.getAttribute("data-deeplink-highlight"),_element$classList=(customClasses?(_element$classList=element.classList).add.apply(_element$classList,_toConsumableArray(customClasses.split(" "))):(_element$classList=element.classList).add.apply(_element$classList,highlightClasses),element.getAttribute("data-deeplink-duration")||2e3);setTimeout(function(){var _element$classList3;customClasses?(_element$classList3=element.classList).remove.apply(_element$classList3,_toConsumableArray(customClasses.split(" "))):(_element$classList3=element.classList).remove.apply(_element$classList3,highlightClasses)},parseInt(_element$classList))},navigateTo:function(targetId){!(1<arguments.length&&void 0!==arguments[1])||arguments[1]?window.location.hash=targetId:this.processDeepLink(targetId)}}),Alpine.nextTick(function(){Alpine.store("deepLink").init()})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initDeepLinkHandler=initDeepLinkHandler;